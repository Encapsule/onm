module.exports=function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){a.exports.Model=c(2),a.exports.Address=c(3),a.exports.Store=c(4),a.exports.Namespace=c(5),a.exports.intrinsics=c(6),a.exports.util=c(7),a.exports.uuid=c(1)},function(a){a.exports=require("node-uuid")},function(a,b,c){(function(){var b,d,e,f,g,h,i,j,k,l=function(a,b){return function(){return a.apply(b,arguments)}};e=c(8),h=c(7),i=c(6),b=c(3),d=c(9),g=c(10),k=c(11),j=c(1),a.exports=f=function(){function a(a){this.toJSON=l(this.toJSON,this),this.isEqual=l(this.isEqual,this),this.getSemanticBindings=l(this.getSemanticBindings,this),this.createAddressFromHashString=l(this.createAddressFromHashString,this),this.addressFromLRI=l(this.addressFromLRI,this),this.createAddressFromHumanReadableString=l(this.createAddressFromHumanReadableString,this),this.addressFromURI=l(this.addressFromURI,this),this.createPathAddress=l(this.createPathAddress,this),this.createRootAddress=l(this.createRootAddress,this),this.address=l(this.address,this);var b,c;try{if(b=e.setCID({ref:this,cname:"Model"}),b.error)throw new Error(b.error);this.implementation=new g(this,null!=a&&a||i.jsonObject)}catch(d){throw c=d,new Error("onm.Model constructor failed: "+c.message)}}return a.prototype.address=function(a){var b;if(b=k.parse({model:this,xri:a}),b.error)throw new Error("onm.Model.address failed: "+b.error);return b.result},a.prototype.createRootAddress=function(){var a;console.warn("onm.Model.createRootAddress is deprecated in onm v0.3. Use onm.Model.address API.");try{return new b(this,[new d(this,void 0,void 0,0)])}catch(c){throw a=c,new Error("createRootAddress failure: "+a.message)}},a.prototype.createPathAddress=function(a){var b,c;if(console.warn("onm.Model.createPathAddress is deprecated in onm v0.3. Use onm.Model.address API."),b=[],c=k.parse({model:this,xri:a}),c.error)throw new Error("onm.Model.createPathAddress failed: "+c.error);return c.result},a.prototype.addressFromURI=function(a){var b,c;if(console.warn("onm.Model.addressFromURI is deprecated in onm v0.3. Use onm.Model.address API."),b=[],c=k.parse({model:this,xri:a}),c.error)throw new Error("onm.Model.addressFromURI failed: "+c.error);return c.result},a.prototype.createAddressFromHumanReadableString=function(a){return console.warn("onm.Model.createAddressFromHashString is deprecated in onm v0.3. Use onm.Model.address API."),this.addressFromURI(a)},a.prototype.addressFromLRI=function(a){var b,c;if(console.warn("onm.Model.addressFromLRI is deprecated in onm v0.3. Use v0.3 onm.Model.address API."),b=[],c=k.parse({model:this,xri:a}),c.error)throw new Error("onm.Model.addressFromLRI failed: "+c.error);return c.result},a.prototype.createAddressFromHashString=function(a){return console.log("onm v0.3: onm.Model.createAddressFromHashString is deprecated. Use v0.3 onm.Model.addressFromLRI API."),this.addressFromLRI(a)},a.prototype.getSemanticBindings=function(){var a;try{return this.implementation.semanticBindings}catch(b){throw a=b,new Error("getSemanticBindings failure: "+a.message)}},a.prototype.isEqual=function(b,c){var d,e;try{if(!(null!=b&&b&&b instanceof a))throw new Error("Missing or invalid onm.Model instance reference specified.");return e=!(null!=c&&c)&&!0||c===!0||!1,!e&&this.uuid===b.uuid||this.uuid===b.uuid&&this.uuidVersion===b.uuidVersion}catch(f){throw d=f,new Error("isEqual failure: "+d.message)}},a.prototype.toJSON=function(a,b){var c;try{return JSON.stringify(this.implementation.objectModelDeclaration,a,b)}catch(d){throw c=d,new Error("onm.Model.toJSON failed: "+c.message)}},a}()}).call(this)},function(a,b,c){(function(){var b,d,e,f,g,h=function(a,b){return function(){return a.apply(b,arguments)}};f=c(8),e=c(9),a.exports=b=function(){function a(a,b){this.visitExtensionPointAddresses=h(this.visitExtensionPointAddresses,this),this.visitChildAddresses=h(this.visitChildAddresses,this),this.visitSubaddressesDescending=h(this.visitSubaddressesDescending,this),this.visitSubaddressesAscending=h(this.visitSubaddressesAscending,this),this.visitParentAddressesDescending=h(this.visitParentAddressesDescending,this),this.visitParentAddressesAscending=h(this.visitParentAddressesAscending,this),this.getComponentKey=h(this.getComponentKey,this),this.getPropertiesModel=h(this.getPropertiesModel,this),this.getModel=h(this.getModel,this),this.createSubcomponentAddress=h(this.createSubcomponentAddress,this),this.createComponentAddress=h(this.createComponentAddress,this),this.createSubpathAddress=h(this.createSubpathAddress,this),this.createParentAddress=h(this.createParentAddress,this),this.clone=h(this.clone,this),this.isSameType=h(this.isSameType,this),this.isParent=h(this.isParent,this),this.isEqual=h(this.isEqual,this),this.isRoot=h(this.isRoot,this),this.lri=h(this.lri,this),this.getHashString=h(this.getHashString,this),this.uri=h(this.uri,this),this.getHumanReadableString=h(this.getHumanReadableString,this),this.address=h(this.address,this);var c,e;try{if(c=f.setCID({ref:this,cname:"Address"}),c.error)throw new Error(c.error);this.model=null!=a&&a||function(){throw new Error("Missing required object model input parameter.")}(),this.implementation=new d(this,a,b),this.isComplete=function(a){return function(){return a.implementation.complete}}(this),this.isQualified=function(a){return function(){return!a.implementation.keysRequired||a.implementation.keysSpecified}}(this),this.isResolvable=function(a){return function(){return a.isComplete()&&a.isQualified()}}(this),this.isCreatable=function(a){return function(){return a.isComplete()&&a.implementation.keysRequired&&!a.implementation.keysSpecified}}(this)}catch(g){throw e=g,new Error("Address error: "+e.message)}}return a.prototype.address=function(a){var b,c,d,e;for(b=[],e={error:null,result:null},c=!1;!c;){if(c=!0,null==a||!a){e.result=this;break}if(d=g.parse({model:this.model,addressBase:this,xri:a}),d.error){b.unshift(d.error);break}e.result=d.result}if(b.length&&(b.unshift("onm.Address.address failed:"),e.error=b.join(" ")),e.error)throw new Error(e.error);return e.result},a.prototype.getHumanReadableString=function(){return console.log("onm v0.3: onm.Address.getHumanReadableString is deprecated. Use v0.3 onm.Address.uri API."),this.uri()},a.prototype.uri=function(){var a,b,c,d;for(a=[],d={error:null,result:null},c=!1;!c;){if(c=!0,b=g.generate({address:this,format:"uri"}),b.error){a.unshift(b.error);break}d.result=b.result}if(a.length&&(a.unshift("onm.Address.uri failed:"),d.error=a.join(" ")),a.length)throw new Error(d.error);return d.result},a.prototype.getHashString=function(){return console.log("onm v0.3: onm.Address.getHashString is deprecated. Use v0.3 onm.Address.lri API."),this.lri()},a.prototype.lri=function(){var a,b,c,d;for(a=[],d={error:null,result:null},c=!1;!c;){if(c=!0,b=g.generate({address:this,format:"lri"}),b.error){a.unshift(b.error);break}d.result=b.result}if(a.length&&(a.unshift("onm.Address.lri failed:"),d.error=a.join(" ")),a.length)throw new Error(d.error);return d.result},a.prototype.isRoot=function(){var a;try{return 0===this.implementation.getLastToken().idNamespace}catch(b){throw a=b,new Error("CNMjs.Address.isRoot failure: "+a.message)}},a.prototype.isEqual=function(a){var b,c,d,e,f;try{if(null==a||!a)throw new Error("Missing address input parameter.");if(this.implementation.tokenVector.length!==a.implementation.tokenVector.length)return!1;for(d=!0,c=0;c<this.implementation.tokenVector.length;){if(e=this.implementation.tokenVector[c],f=a.implementation.tokenVector[c],!e.isEqual(f)){d=!1;break}c++}return d}catch(g){throw b=g,new Error("isEqual failure: "+b.message)}},a.prototype.isParent=function(a){var b,c,d,e,f,g;try{if(null==a||!a)throw new Error("Missing address input parameter.");if(this.implementation.tokenVector.length>a.implementation.tokenVector.length)return!1;if(this.isEqual(a))return!1;for(d=this.implementation.tokenVector.length-1,c=0;c<this.implementation.tokenVector.length;){if(f=this.implementation.tokenVector[c],g=a.implementation.tokenVector[c],!f.isEqual(g)){if(c!==d)return!1;for(e=a.createParentAddress();e;){if(this.isEqual(e))return!0;e=e.createParentAddress()}return!1}if(c===d)return!0;c++}return!1}catch(h){throw b=h,new Error("isParent failure: "+b.message)}},a.prototype.isSameType=function(a){var b,c,d,e;try{if(null==a||!a)throw new Error("Missing address input parameter.");return e=this.implementation.getLastToken(),d=a.implementation.getLastToken(),c=e.idNamespace===d.idNamespace}catch(f){throw b=f,new Error("isSameType failure: "+b.message)}},a.prototype.clone=function(){var b;try{return new a(this.model,this.implementation.tokenVector)}catch(c){throw b=c,new Error("clone failure: "+b.message)}},a.prototype.createParentAddress=function(b){var c,d,f,g,h,i,j;try{if(!this.implementation.tokenVector.length)throw new Error("Invalid address contains no address tokens.");if(f=null!=b&&b||1,j=this.implementation.tokenVector.length-1,i=this.implementation.tokenVector[j--],0===i.namespaceDescriptor.id)return void 0;for(;f&&(c=i.namespaceDescriptor,0!==c.id);)i="component"!==c.namespaceType?new e(i.model,i.idExtensionPoint,i.key,c.parent.id):-1!==j&&this.implementation.tokenVector[j--]||function(){throw new Error("Internal error: exhausted token stack.")}(),f--;return h=0>j&&[]||this.implementation.tokenVector.slice(0,j+1),g=new a(i.model,h),g.implementation.pushToken(i),g}catch(k){throw d=k,new Error("createParentAddress failure: "+d.message)}},a.prototype.createSubpathAddress=function(a){var b,c,d,e;for(console.log("onm.Address.createSubpathAddress is deprecated in v0.3. Use onm.Address.address API."),b=[],e={error:null,result:null},c=!1;!c;){if(c=!0,d=g.parse({model:this.model,addressBase:this,xri:a}),d.error){b.unshift(d.error);break}e.result=d.result}if(b.length&&(b.unshift("onm.Address.createSubpathAddress failed:"),e.error=b.join(" ")),e.error)throw new Error(e.error);return e.result},a.prototype.createComponentAddress=function(){var a,b,c;try{return a=this.implementation.getDescriptor(),a.isComponent?this.clone():c=this.implementation.createSubpathIdAddress(a.idComponent)}catch(d){throw b=d,new Error("createComponentAddress failure: "+b.message)}},a.prototype.createSubcomponentAddress=function(){var a,b,c;try{if(a=this.implementation.getDescriptor(),"extensionPoint"!==a.namespaceType)throw new Error("Unable to determine subcomponent to create because this address does not specifiy an extension point namespace.");return c=new e(this.model,a.id,void 0,a.archetypePathId),this.clone().implementation.pushToken(c)}catch(d){throw b=d,new Error("createSubcomponentAddress failure: "+b.message)}},a.prototype.getModel=function(){var a;try{return this.implementation.getDescriptor().namespaceModelDeclaration}catch(b){throw a=b,new Error("getModel failure: "+a.message)}},a.prototype.getPropertiesModel=function(){var a;try{return this.implementation.getDescriptor().namespaceModelPropertiesDeclaration}catch(b){throw a=b,new Error("getPropertiesModel failure: "+a.message)}},a.prototype.getComponentKey=function(){var a;try{if(!this.isResolvable())throw new Error("You cannot obtain the component key of an unresolvable address.");return this.implementation.getLastToken().key}catch(b){throw a=b,new Error("getComponentKey failure: "+a.message)}},a.prototype.visitParentAddressesAscending=function(a){var b,c,d,e,f;try{if(null==a||!a)return!1;if(null!=this.parentAddressesAscending&&this.parentAddressesAscending||(this.parentAddressesAscending=[],this.visitParentAddressesDescending(function(a){return function(b){return a.parentAddressesAscending.push(b),!0}}(this)),this.parentAddressesAscending.reverse()),!this.parentAddressesAscending.length)return!1;for(f=this.parentAddressesAscending,d=0,e=f.length;e>d;d++){b=f[d];try{a(b)}catch(g){throw c=g,new Error("Failure occurred inside your registered callback function implementation: "+c.message)}}return!0}catch(g){throw c=g,new Error("visitParentAddressesAscending failure: "+c.message)}},a.prototype.visitParentAddressesDescending=function(a){var b,c,d,e,f,g;try{if(null==a||!a)return!1;if(null==this.parentAddressesDesending||!this.parentAddressesDesceding)for(this.parentAddressesDescending=[],d=this.createParentAddress();d;)this.parentAddressesDescending.push(d),d=d.createParentAddress();if(!this.parentAddressesDescending.length)return!1;for(g=this.parentAddressesDescending,e=0,f=g.length;f>e;e++){b=g[e];try{a(b)}catch(h){throw c=h,new Error("Failure occurred inside your registered callback function implementation: "+c.message)}}return!0}catch(h){throw c=h,new Error("visitParentAddressesDescending failure: "+c.message)}},a.prototype.visitSubaddressesAscending=function(a){var b,c,d,e,f,g,h;try{if(null==a||!a)return!1;if(null==this.subnamespaceAddressesAscending||!this.subnamespaceAddressesAscending)for(this.subnamespaceAddressesAscending=[],c=[],c.push(this),e=function(a){return function(b){return"extensionPoint"!==b.getModel().namespaceType?b.visitChildAddresses(function(b){return a.subnamespaceAddressesAscending.push(b),c.push(b)}):void 0}}(this);c.length;)e(c.pop());for(h=this.subnamespaceAddressesAscending,f=0,g=h.length;g>f;f++){b=h[f];try{a(b)}catch(i){throw d=i,new Error("Failure occurred inside your registered callback function implementation: "+d.message)}}return!0}catch(i){throw d=i,new Error("visitSubaddressesAscending failure: "+d.message)}},a.prototype.visitSubaddressesDescending=function(a){var b,c,d,e,f;try{if(!a||!a)return!1;for(null!=this.subnamespaceAddressesDescending&&this.subnamespaceAddressesDescending||(this.subnamespaceAddressesDescending=[],this.visitSubaddressesAscending(function(a){return function(b){return a.subnamespaceAddressesDescending.push(b)}}(this)),this.subnamespaceAddressesDescending.reverse()),f=this.subnamespaceAddressesDescending,d=0,e=f.length;e>d;d++){b=f[d];try{a(b)}catch(g){throw c=g,new Error("Failure occurred inside your registered callback function implementation: "+c.message)}}return!0}catch(g){throw c=g,new Error("visitSubaddressesAscending failure: "+c.message)}},a.prototype.visitChildAddresses=function(a){var b,c,d,e,f,g,h;try{if(null==a||!a)return!1;if(e=this.implementation.getDescriptor(),"extensionPoint"===e.namespaceType)return!1;for(h=e.children,f=0,g=h.length;g>f;f++){c=h[f],b=this.implementation.createSubpathIdAddress(c.id);try{a(b)}catch(i){throw d=i,new Error("Failure occurred inside your registered callback function implementation: "+d.message)}}return!0}catch(i){throw d=i,new Error("visitChildAddresses failure: "+d.message)}},a.prototype.visitExtensionPointAddresses=function(a){var b,c,d,e,f,g,h,i,j,k,l;try{if(null==a||!a)return!1;if(null==this.extensionPointAddresses||!this.extensionPointAddresses){this.extensionPointAddresses=[],c=this.createComponentAddress(),g=c.implementation.getDescriptor(),k=g.extensionPoints;for(h in k)f=k[h],e=this.implementation.createSubpathIdAddress(f.id),this.isParent(e)&&this.extensionPointAddresses.push(e)}for(l=this.extensionPointAddresses,i=0,j=l.length;j>i;i++)b=l[i],a(b);return!0}catch(m){throw d=m,new Error("visitExtensionPointAddresses failure: "+d.message)}},a}(),d=c(12),g=c(11)}).call(this)},function(a,b,c){(function(){var b,d,e,f,g,h,i,j,k,l,m,n=function(a,b){return function(){return a.apply(b,arguments)}};e=c(8),l=c(7),j=c(13),d=c(9),b=c(3),k=c(14),f=c(2),g=c(5),m=c(1),i=function(){function a(a,b,c){var d,f,g,h,i;try{if(f=e.setCID({ref:this,cname:"Store"}),f.error)throw new Error(f.error);this.store=a,this.model=b,this.reifier=new j(this.store),this.dataReference={},this.objectStoreSource="new",h=function(a){return function(b){var c,d;if(d=void 0,null!=b&&b)switch(c=Object.prototype.toString.call(b)){case"[object Object]":d=b,a.objectStoreSource="json";break;case"[object String]":d=h(JSON.parse(b));break;default:throw new Error("Invalid store construction data type '"+c+"'. Expected '[object Object]' or JSON equivalent string serialization.")}return null!=d&&d||{}}}(this),d={strategy:"create",address:this.model.address("*"),propertyAssignmentObject:h(c),parentDataReference:this.dataReference,semanticBindingsReference:this.model.getSemanticBindings()},i=k.resolve(d),this.observers={},this.observersState={}}catch(l){throw g=l,new Error("StoreDetails failure: "+g.message)}}return a}(),a.exports=h=function(){function a(a,b){this.removeObserverNamespaceState=n(this.removeObserverNamespaceState,this),this.openObserverNamespaceState=n(this.openObserverNamespaceState,this),this.openObserverComponentState=n(this.openObserverComponentState,this),this.removeObserverState=n(this.removeObserverState,this),this.openObserverState=n(this.openObserverState,this),this.unregisterObserver=n(this.unregisterObserver,this),this.registerObserver=n(this.registerObserver,this),this.sdab=n(this.sdab,this),this.toJSON=n(this.toJSON,this),this.removeComponent=n(this.removeComponent,this),this.createComponent=n(this.createComponent,this),this.nsCreate=n(this.nsCreate,this),this.openNamespace=n(this.openNamespace,this),this.nsOpen=n(this.nsOpen,this),this.nsAccess=n(this.nsAccess,this),this.namespace=n(this.namespace,this),this.address=n(this.address,this),this.validateAddressModel=n(this.validateAddressModel,this);var c,d;try{this.model=d=null!=a&&a||new f,this.implementation=new i(this,d,b),this.jsonTag=d.jsonTag,this.label=d.label,this.description=d.description}catch(e){throw c=e,new Error("onm.Store constructor failed: "+c.message)}}return a.prototype.validateAddressModel=function(a,b){var c;try{if(null==a||!a)throw new Error("Missing address input parameter.");if(null==a.model||!a.model)throw new Error("Invalid address object passed as input parameter.");return this.model.isEqual(a.model,b)}catch(d){throw c=d,new Error("onm.Store.validateAddressModel failed: "+c.message)}},a.prototype.address=function(a){var b,c,d,e,f;try{if(b=this.model.address("*"),null==a||!a)return b;if(null==a.rls||!request.rls)throw new Error("Request missing required resource locator string property 'rls'.");if(f=Object.prototype.toString.call(a.rls),"[object String]"!==f)throw new Error("Invalid resource locator type '"+f+"'. Expected '[object String]'.");e=a.rls,c=null;try{c=this.model.address(e)}catch(g){d=g;try{c=this.model.lri(e)}catch(g){d=g;try{c=this.model.uri(e)}catch(g){throw d=g,new Error("Invalid resource locator string '"+e+"'.")}}}return subpathAddress}catch(g){throw d=g,new Error("onm.Store.address failed: "+d.message)}},a.prototype.namespace=function(a){var c,d,e,f,h,i;try{if(f={operation:null!=a&&a&&null!=a.operation&&a.operation||"access",address:void 0,data:null!=a&&a&&null!=a.data&&a.data||{}},null!=a&&a)if(null!=a.rl&&a.rl)if(i=Object.prototype.toString.call(a.rl),"[object String]"===i)f.address=this.address(a.rl);else{if(!(a.rl instanceof b))throw new Error("Invalid resource locator type '"+i+"' specified. Expecting either onm.Address or onm-format resource locator string.");if(!this.model.isEqual(a.rl.model))throw new Error("Invalid resource locator is bound to model "+a.rl.model.uuid+":"+a.rl.model.uuidVersion+" not "+this.model.uuid+":"+this.model.uuidVersion+" as expected.");f.address=a.rl}else f.address=this.address();else f.address=this.address();return c={},c.strategy="access"===f.operation&&"negotiate"||f.operation,c.address=f.address,c.propertyAssignmentObject=f.data,c.parentDataReference=this.implementation.dataReference,c.semanticBindingsReference=this.model.getSemanticBindings(),h=k.resolve(c),e=new g(this,h)}catch(j){throw d=j,new Error("onm.Store.namespace failed: "+d.message)}},a.prototype.nsAccess=function(a,b){var c;try{return this.namespace({operation:"access",rl:a,data:b})}catch(d){throw c=d,new Error("onm.Store.nsAccess failed: "+c.message)}},a.prototype.nsOpen=function(a,b){var c;try{return this.namespace({operation:"open",rl:a,data:b})}catch(d){throw c=d,new Error("onm.Store.nsOpen failed: "+c.message)}},a.prototype.openNamespace=function(a,b){return console.log("onm v0.3: Store.openNamespace is deprecated. Use v0.3 Store.nsOpen, or Store.namespace API's."),this.nsOpen(a,b)},a.prototype.nsCreate=function(a,b){var c;try{return this.namespace({operation:"create",rl:a,data:b})}catch(d){throw c=d,new Error("onm.Store.nsCreate failed: "+c.message)}},a.prototype.createComponent=function(a,b){return console.log("onm v0.3: Store.createComponent is deprecated. Use v0.3 Store.nsCreate, or Store.namespace API's."),this.nsCreate(a,b)},a.prototype.removeComponent=function(a){var b,c,d,e,f,g,h;try{if(null==a||!a)throw new Error("Missing address input parameter!");if(!this.validateAddressModel(a))throw new Error("The specified address cannot be used to reference this store because it's not bound to the same model as this store.");if(!a.isQualified())throw new Error("You cannot use an unqualified address to remove a component.");if(e=a.implementation.getDescriptor(),!e.isComponent)throw new Error("The specified address does not specify the root of a component.");if("root"===e.namespaceType)throw new Error("The specified address refers to the root namespace of the store which cannot be removed.");return this.implementation.reifier.reifyStoreExtensions(a,void 0,!0),this.implementation.reifier.unreifyStoreComponent(a),d=this.nsOpen(a),g=a.createParentAddress(),h=this.nsOpen(g),b=h.data(),c=a.implementation.getLastToken().key,delete b[c],h.update(),d}catch(i){throw f=i,new Error("onm.Store.removeComponent failed: "+f.message)}},a.prototype.toJSON=function(a,b){var c;try{return this.namespace().toJSON(a,b)}catch(d){throw c=d,new Error("onm.Store.toJSON failed: "+c.message)}},a.prototype.sdab=function(){var a,b,c;try{return b=this.nsAccess(),c={model:this.model.implementation.objectModelDeclaration,store:{}},c.store[b.ckey()]=b.data(),c}catch(d){throw a=d,new Error("onm.Store.sdab failed: "+a.message)}},a.prototype.registerObserver=function(a,b){var c,d,e;try{if(null==a||!a)throw new Error("Missing callback interface namespace input parameter..");return a.observingEntity=b,d=m.v4(),this.implementation.observers[d]=a,e=this.model.address("*"),this.implementation.reifier.dispatchCallback(void 0,"onObserverAttachBegin",d),this.implementation.reifier.reifyStoreComponent(e,d),this.implementation.reifier.reifyStoreExtensions(e,d),this.implementation.reifier.dispatchCallback(void 0,"onObserverAttachEnd",d),d}catch(f){throw c=f,new Error("registerObserver failure: "+exception_.message)}},a.prototype.unregisterObserver=function(a){var b,c,d;try{if(null==a||!a)throw new Error("Missing observer ID code input parameter!");if(c=this.implementation.observers[a],null==c||!c)throw new Error("Unknown observer ID code provided. No registration to remove.");return this.implementation.reifier.dispatchCallback(void 0,"onObserverDetachBegin",a),d=this.model.address("*"),this.implementation.reifier.reifyStoreExtensions(d,a,!0),this.implementation.reifier.unreifyStoreComponent(d,a),this.implementation.reifier.dispatchCallback(void 0,"onObserverDetachEnd",a),this.removeObserverState(a),delete this.implementation.observers[a]}catch(e){throw b=e,new Error("unregisterObserver failure: "+b.message)}},a.prototype.openObserverState=function(a){var b,c;try{if(null==a||!a)throw new Error("Missing observer ID parameter!");return c=null!=this.implementation.observersState[a]&&this.implementation.observersState[a]||(this.implementation.observersState[a]=[])}catch(d){throw b=d,new Error("openObserverStateObject failure: "+b.message)}},a.prototype.removeObserverState=function(a){if(null==a||!a)throw new Error("Missing observer ID parameter!");return"undefined"!=typeof observerState&&null!==observerState&&observerState&&null!=this.implementation.observerState[a]&&this.implementation.observerState[a]&&delete this.implementation.observerState[a],this},a.prototype.openObserverComponentState=function(a,b){var c,d,e,f;try{if(null==a||!a)throw new Error("Missing observer ID parameter.");if(null==b||!b)throw new Error("Missing address input parameter.");return f=b.implementation.getLastToken(),d=f.componentDescriptor.id,c=b.createComponentAddress(),this.openObserverNamespaceState(a,c)}catch(g){throw e=g,new Error("openObserverComponentState failure: "+e.message)}},a.prototype.openObserverNamespaceState=function(a,b){var c,d,e,f,g,h,i;try{if(null==a||!a)throw new Error("Missing observer ID parameter.");if(null==b||!b)throw new Error("Missing address input parameter.");return h=this.openObserverState(a),i=b.implementation.getLastToken(),d=i.namespaceDescriptor.id,e=null!=h[d]&&h[d]||(h[d]={}),g=b.getHashString(),f=null!=e[g]&&e[g]||(e[g]={})}catch(j){throw c=j,new Error("openObserverNamespaceState failure: "+c.message)}},a.prototype.removeObserverNamespaceState=function(a){var b,c,d;return c=this.modelViewObserversState[a],null!=c&&c?(d=c[namespaceSelector_.pathId],null!=d&&d?(b=namespaceSelector_.getHashString(),delete d[b],0===l.dictionaryLength(d)&&delete c[namespaceSelector_.pathId],this):this):this},a}()}).call(this)},function(a,b,c){(function(){var b,d,e,f,g,h,i=function(a,b){return function(){return a.apply(b,arguments)}};e=c(8),d=c(9),b=c(3),h=c(14),g=function(){function a(a,b,c){var d;try{this.dataReference=h.getResolvedNamedObjectReference(c),this.resolvedTokenArray=h.getResolvedTokenVector(c),this.getResolvedToken=function(a){return function(){return a.resolvedTokenArray.length&&a.resolvedTokenArray[a.resolvedTokenArray.length-1]||void 0}}(this),this.resolvedAddress=void 0}catch(e){throw d=e,new Error("NamespaceDetails failure: "+d.message)}}return a}(),a.exports=f=function(){function a(a,b){this.visitExtensionPointSubcomponents=i(this.visitExtensionPointSubcomponents,this),this.getExtensionPointSubcomponentCount=i(this.getExtensionPointSubcomponentCount,this),this.update=i(this.update,this),this.toJSON=i(this.toJSON,this),this.nsComponent=i(this.nsComponent,this),this.nsOpen=i(this.nsOpen,this),this.nsCreate=i(this.nsCreate,this),this.nsAccess=i(this.nsAccess,this),this.namespace=i(this.namespace,this),this.lri=i(this.lri,this),this.uri=i(this.uri,this),this.raddress=i(this.raddress,this),this.caddress=i(this.caddress,this),this.address=i(this.address,this),this.getResolvedAddress=i(this.getResolvedAddress,this),this.getComponentKey=i(this.getComponentKey,this),this.ckey=i(this.ckey,this),this.model=i(this.model,this),this.data=i(this.data,this),this.name=i(this.name,this);var c,d;try{if(c=e.setCID({ref:this,cname:"Namespace"}),c.error)throw new Error(c.error);if(null==a||!a)throw new Error("Missing object store input parameter.");this.store=a,this.implementation=new g(this,a,b)}catch(f){throw d=f,new Error("onm.Namespace constructor failed: "+d.message)}}return a.prototype.name=function(){var a;try{return this.implementation.getResolvedToken().namespaceDescriptor.jsonTag}catch(b){throw a=b,new Error("onm.Namespace.name failed: "+a.message)}},a.prototype.data=function(a){var b;try{return null!=a&&a&&this.namespace({operation:"access",rl:this.address(),data:a}),this.implementation.dataReference}catch(c){throw b=c,new Error("onm.Namespace.data failed: "+b.message)}},a.prototype.model=function(){var a;try{return this.address().getModel()}catch(b){throw a=b,new Error("onm.Namespace.model failed: "+a.message)}},a.prototype.ckey=function(){var a;try{return this.implementation.getResolvedToken().key}catch(b){throw a=b,new Error("onm.Namespace.ckey failed: "+a.message)}},a.prototype.getComponentKey=function(){return console.log("onm v0.3: onm.Namespace.getComponentKey is deprecated. Use v0.3 onm.Namespace.ckey API."),this.key()},a.prototype.getResolvedAddress=function(){return console.log("onm v0.3: onm.Namespace.getResolvedAddress has been deprecated. Use v0.3 onm.Namespace.address API."),this.address()},a.prototype.address=function(a){var c,d,e,f,g,h,i,j,k;try{if(i=this.implementation.resolvedAddress,null!=i&&i||(i=this.implementation.resolvedAddress=new b(this.store.model,this.implementation.resolvedTokenArray)),null==a||!a)return i;if(h=Object.prototype.toString.call(a),"[object String]"!==h)throw new Error("Invalid type '"+rprsType+"'. Expected '[object String]'.");for(g=a.split("."),c=0,j=0,k=g.length;k>j&&(e=g[j],"//"===e);j++)c++;return f=g.join(c,g.length,"."),c&&(i=i.createParentAddress(c)),i.createSubpathAddress(f)}catch(l){throw d=l,new Error("onm.Namespace.address failed: "+d.message)}},a.prototype.caddress=function(){var a;try{return this.address().createComponentAddress()}catch(b){throw a=b,new Error("onm.Namespace.caddress failed: "+a.message)}},a.prototype.raddress=function(){var a;try{return this.store.address()}catch(b){throw a=b,new Error("onm.Namespace.raddress faled: "+a.message)}},a.prototype.uri=function(){var a;try{return this.address().uri()}catch(b){throw a=b,new Error("onm.Namespace.uri failed: "+a.message)}},a.prototype.lri=function(){var a;try{return this.address().lri()}catch(b){throw a=b,new Error("onm.Namespace.lri failed: "+a.message)}},a.prototype.namespace=function(a){var c,d,e,f;try{if(null==a||!a)return this;if(e={operation:null!=a.operation&&a.operation||"access",address:void 0,data:null!=a.data&&a.data},null!=a.rl&&a.rl)if(a.rl instanceof b)e.address=a.rl;else try{e.address=this.address(a.rl)}catch(g){c=g;try{e.address=this.store.address(a.rl)}catch(g){switch(c=g,f=Object.prototype.toString.call(a.rl)){case"[object String]":d="Invalid resource locator '"+a.rl+"'. Not in model address space.";break;default:d="Unrecognized resource locator type '"+typeof a.rl+"'."}throw new Error(d)}}else e.address=this.address();return this.store.namespace({operation:e.operation,rl:e.rl,data:e.data})}catch(g){throw c=g,new Error("onm.Namespace.namespace failed: "+c.message)}},a.prototype.nsAccess=function(a,b){var c;try{return this.namespace({operaton:"access",rl:a,data:b})}catch(d){throw c=d,new Error("onm.Namespace.nsAccess failed: "+c.message)}},a.prototype.nsCreate=function(a,b){var c;try{return this.namespace({operation:"create",rl:a,data:b})}catch(d){throw c=d,new Error("onm.Namespace.nsCreate failed: "+c.message)}},a.prototype.nsOpen=function(a,b){try{return this.namespace({operation:"open",rl:a,data:b})}catch(c){throw new Error("onm.Namespace.nsOpen failed: "+exception_.message)}},a.prototype.nsComponent=function(a){var b;try{return this.namespace({operation:"open",rl:this.caddress(),data:a})}catch(c){throw b=c,new Error("onm.Namespace.nsComponent failed: "+b.message)}},a.prototype.toJSON=function(a,b){var c,d,e;try{if(e=null!=b&&b||0,d=JSON.stringify(this.implementation.dataReference,a,e),null==d||!d)throw new Error("Namespace data is corrupt. Unable to serialize to JSON.");return d}catch(f){throw c=f,new Error("onm.Namespace.toJSON serialization failed on address '"+this.address().uri()+"' with detail: "+c.message)}},a.prototype.update=function(){var a,b,c,d,e,f,g,h;try{for(a=this.address(),f=this.store.model.getSemanticBindings(),g=null!=f&&f&&null!=f.update&&f.update||void 0,null!=g&&g&&(g(this.implementation.dataReference),a.visitParentAddressesDescending(function(a){return function(b){var c;return c=a.store.openNamespace(b).data(),g(c)}}(this))),c=0,b=!1,h=[];null!=a&&a;)d=a.implementation.getDescriptor(),0===c?this.store.implementation.reifier.dispatchCallback(a,"onNamespaceUpdated",void 0):this.store.implementation.reifier.dispatchCallback(a,"onSubnamespaceUpdated",void 0),("component"===d.namespaceType||"root"===d.namespaceType)&&(b?this.store.implementation.reifier.dispatchCallback(a,"onSubcomponentUpdated",void 0):(this.store.implementation.reifier.dispatchCallback(a,"onComponentUpdated",void 0),b=!0)),a=a.createParentAddress(),h.push(c++);return h}catch(i){throw e=i,new Error("onm.Namespace.update failed: "+e.message)}},a.prototype.getExtensionPointSubcomponentCount=function(){var a,b,c;try{if(c=this.implementation.getResolvedToken(),null==c||!c)throw new Error("Internal error: unable to resolve token.");return a=0,"extensionPoint"===c.namespaceDescriptor.namespaceType&&(a=Object.keys(this.implementation.dataReference).length),a}catch(d){throw b=d,new Error("onm.Namespace.getExtensionPointSubcomponentCount failed: "+b.message)
}},a.prototype.visitExtensionPointSubcomponents=function(a){var b,c,e,f,g,h,i;try{if(g=this.implementation.getResolvedToken(),null==g||!g)throw new Error("Internal error: unable to resolve token.");if("extensionPoint"!==g.namespaceDescriptor.namespaceType)throw new Error("You may only visit the subcomponents of an extension point namespace.");i=this.implementation.dataReference;for(e in i){f=i[e],b=this.address().clone(),h=new d(this.store.model,g.idNamespace,e,g.namespaceDescriptor.archetypePathId),b.implementation.pushToken(h);try{a(b)}catch(j){throw c=j,new Error("Failure occurred inside your callback function implementation: "+c.message)}}return!0}catch(j){throw c=j,new Error("onm.Namespace.visitExtensionPointSubcomponents failed: "+c.message)}},a}()}).call(this)},function(a){(function(){a.exports={},a.exports.jsonObject={___label:"Unmodeled JSON Object",___description:"onm intrinsic data model for an unmodeled namespace (i.e. named object w/no declared properties, or subnamespaces).",uuid:"fc544082-dfcc-4513-9855-954fbb1f7485",uuidVersion:"4b237807-29ce-44de-8771-941b96397b5c",jsonTag:"jsonObject"}}).call(this)},function(a){(function(){var b;b=a.exports={},b.uuidNull="00000000-0000-0000-0000-000000000000",b.clone=function(a){var c,d,e,f;try{if(null==a||"object"!=typeof a)return a;if(a instanceof Date)return new Date(a.getTime());if(a instanceof RegExp)return d="",null!=a.global&&(d+="g"),null!=a.ignoreCase&&(d+="i"),null!=a.multiline&&(d+="m"),null!=a.sticky&&(d+="y"),new RegExp(a.source,d);f=new a.constructor;for(e in a)f[e]=b.clone(a[e]);return f}catch(g){throw c=g,new Error("onm.UTIL.clone FATAL: "+c.message)}},b.dictionaryLength=function(a){var b;try{return Object.keys(a).length}catch(c){throw b=c,new Error("dictionaryLength: "+b.message)}},b.getEpochTime=function(){return Math.round((new Date).getTime()/1e3)}}).call(this)},function(a,b,c){(function(){var b,d,e;b=a.exports={},d=c(15),b.setCID=function(a){var c,f,g,h,i,j,k,l;for(g=[],l={error:null,result:null},h=!1;!h;){if(h=!0,i=e(a),i.error){g.unshift(i.error);break}if(k=i.result,f=b.getCNAME(k.ref),!f.error){g.unshift("Object is already identified as '"+f.result.cname+"' with CID '"+f.result.cid+"'.");break}if(c=d.cname2cid[k.cname],null==c||!c){g.unshift("Unknown object class name '"+k.cname+"'. Registered in CIDS: ["+d.cnames+"].");break}j=d.reservedPropertyName,k.ref[j]=c,l.result={cid:c,cname:k.cname,ref:k.ref}}return g.length&&(g.unshift("CIDS.setCID:"),l.error=g.join(" ")),l},b.getCNAME=function(a){var b,c,e,f,g,h,i;for(b=[],f={error:null,result:null},c=!1;!c;){if(c=!0,null==a||!a){b.unshift("Bad request missing required JavaScript reference in-parameter.");break}if(e=Object.prototype.toString.call(a),"[object Object]"!==e){b.unshift("Invalid request 'object' value type '"+e+"'. Expected reference to '[object Object]'.");break}if(g=a[d.reservedPropertyName],null==g||!g){b.unshift("Object appears not to be CID-identified.");break}if(h=Object.prototype.toString.call(g),"[object String]"!==h){b.unshift("Object appears to be CID-identified with a value of type '"+h+". Expected '[object String]'.");break}if(22!==g.length){b.unshift("Object appears to be CID-identified with an unknown string format. Expected 22-character IRUT.");break}if(i=d.cid2cname[g],null==i||!i){b.unshift("Object is identified with an unknown CID value '"+g+"'.");break}f.result={cid:g,cname:i,ref:a}}return b.length&&(b.unshift("CIDS.getCNAME:"),f.error=b.join(" ")),f},b.assertCNAME=function(a){var c,f,g,h,i,j,k;for(f=[],k={error:null,result:null},h=!1;!h;){if(h=!0,i=e(a),i.error){f.unshift(i.error);break}if(j=i.result,g=b.getCNAME(j.ref),g.error){f.unshift(g.error);break}if(g.result.cname!==j.cname){if(c=d.cname2cid[j.cname],null==c||!c){f.unshift("Invalid request 'cname' value '"+j.cname+"'. Registered in CIDS: ["+d.cnames+"].");break}f.unshift("Target asserted to be a '"+j.cname+"' is actually a '"+g.result.cname+"' resource.");break}k.result={cid:g.result.cid,cname:j.cname,ref:j.ref}}return f.length&&(f.unshift("CIDS.assertCNAME:"),k.error=f.join(" ")),k},b.CNAMEfromCID=function(a){return d.cid2cname[a]},b.CIDfromCNAME=function(a){return d.cname2cid[a]},e=function(a){var b,c,d,e,f,g;for(c=[],g={error:null,result:null},d=!1;!d;){if(d=!0,null==a||!a){c.unshift("Missing request object in-parameter.");break}if(f=Object.prototype.toString.call(a),"[object Object]"!==f){c.unshift("Invalid 'request' type '"+f+"'. Expected '[object Object]'.");break}if(e=Object.prototype.toString.call(a.ref),"[object Object]"!==e){c.unshift("Invalid request 'ref' value type '"+e+"'. Expected '[object Object]'.");break}if(b=Object.prototype.toString.call(a.cname),"[object String]"!==b){c.unshift("Invalid request 'cname' value type '"+b+"'. Expected '[object String].");break}g.result=a}return c.length&&(g.error=c.join(" ")),g}}).call(this)},function(a){(function(){var b,c=function(a,b){return function(){return a.apply(b,arguments)}};a.exports=b=function(){function a(a,b,d,e){this.isRoot=c(this.isRoot,this),this.isQualified=c(this.isQualified,this),this.isEqual=c(this.isEqual,this),this.clone=c(this.clone,this);var f,g;try{if(this.model=null!=a&&a||function(){throw new Error("Missing object model input parameter.")}(),null==e)throw new Error("Missing target namespace ID input parameter.");if(this.idNamespace=e,this.namespaceDescriptor=a.implementation.getNamespaceDescriptorFromPathId(e),this.idComponent=this.namespaceDescriptor.idComponent,this.componentDescriptor=a.implementation.getNamespaceDescriptorFromPathId(this.idComponent),g=this.componentDescriptor.id>0,this.key=g&&null!=d&&d||void 0,this.keyRequired=g&&null!=this.key&&this.key&&!0||!1,this.idExtensionPoint=-1,this.extensionPointDescriptor=void 0,0!==this.idComponent){if(null==b||!b||-1===b)throw new Error("Missing required idExtensionPoint in-parameter value.");if(this.idExtensionPoint=b,-1!==b&&(this.extensionPointDescriptor=this.model.implementation.getNamespaceDescriptorFromPathId(this.idExtensionPoint),"extensionPoint"!==this.extensionPointDescriptor.namespaceType))throw new Error("Invalid extension point namespace ID '"+idExtensionPoint+" specified '"+this.idExtensionPoint_+"'. Actually a r '"+this.extensionPointDescriptor.namespaceType+".")}return}catch(h){throw f=h,new Error("AddressToken failure: "+f)}}return a.prototype.clone=function(){return new a(this.model,null!=this.extensionPointDescriptor&&this.extensionPointDescriptor&&this.extensionPointDescriptor.id||-1,this.key,this.namespaceDescriptor.id)},a.prototype.isEqual=function(a){var b,c;try{if(null==a||!a)throw new Error("Missing token input parameter.");return c=this.idNamespace===a.idNamespace&&this.key===a.key&&this.idExtensionPoint===a.idExtensionPoint}catch(d){throw b=d,"isEqual failure: "+b}},a.prototype.isQualified=function(){return!this.keyRequired||null!=this.key&&this.key||!1},a.prototype.isRoot=function(){return!this.componentId},a}()}).call(this)},function(a,b,c){(function(){var b,d,e,f,g,h,i,j;if(g=c(7),null==g||!g)throw new Error("Failed to load helper functions");if(null==g.clone||!g.clone)throw new Error("Why are we missing the clone function?");h=c(6),b=c(3),d=c(9),j=c(11),i=c(1),e=1,a.exports=f=function(){function a(a,c){var f,h,j;try{if(this.model=null!=a&&a||function(){throw new Error("Internal error missing model input parameter.")}(),f=function(a){return function(b,c,d,e,h,i){var j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C;try{if(null==b||!b)throw new Error("Missing object model layout object input parameter! If you specified the namespace declaration via object reference, check the validity of the reference.");if(null==b.jsonTag||!b.jsonTag)throw new Error("Missing required namespace declaration property 'jsonTag'.");switch(x=null!=b.jsonTag&&b.jsonTag||function(){throw new Error("Namespace declaration missing required `jsonTag` property.")}(),t=null!=c&&c&&""+c+"."+x||x,o=null!=b.____label&&b.____label||b.jsonTag,l=null!=b.____description&&b.____description||"no description provided",n=a.countDescriptors++,q=null!=b.namespaceType&&b.namespaceType||!n&&(b.namespaceType="root")||function(){throw new Error("Internal error unable to determine namespace type.")}(),s=void 0,s=null!=i&&i?g.clone(i):[],p=null!=b.namespaceProperties&&b.namespaceProperties||{},y=a.objectModelDescriptorById[n]={archetypePathId:-1,children:[],componentNamespaceIds:[],description:l,extensionPointReferenceIds:[],id:n,idComponent:n,isComponent:!1,jsonTag:x,label:o,namespaceType:q,namespaceModelDeclaration:b,namespaceModelPropertiesDeclaration:p,parent:d,parentPathExtensionPoints:s,parentPathIdVector:[],path:t},a.objectModelPathMap[t]=y,null!=d&&d&&(d.children.push(y),y.parentPathIdVector=g.clone(d.parentPathIdVector),y.parentPathIdVector.push(d.id)),a.rankMax<y.parentPathIdVector.length&&(a.rankMax=y.parentPathIdVector.length),k=void 0,q){case"extensionPoint":if(null==e||!e)throw new Error("Internal error: componentDescriptor_ should be defined.");if(y.idComponent=e.id,k=e,k.extensionPoints[t]=y,v=void 0,j=void 0,null!=b.componentArchetype&&b.componentArchetype)v=!0,j=b.componentArchetype;else{if(null==b.componentArchetypePath||!b.componentArchetypePath)throw new Error("Cannot process extension point declaration because its corresponding extension archetype is missing from the object model declaration.");if(v=!1,u=b.componentArchetypePath,r=a.objectModelPathMap[u],null==r||!r)throw new Error("Extension point namespace '"+t+"' component archetype '"+u+"' was not found and is invalid.");if("component"!==r.namespaceType)throw new Error("Extension point namespace '"+t+"' declares component archetype '"+u+"' which is not a 'component' namespace type.");r.extensionPointReferenceIds.push(y.id),y.children.push(r),y.archetypePathId=r.id,a.countExtensionReferences++}z=g.clone(s),z.push(n),a.countExtensionPoints++,v&&f(j,t,y,k,y.parentPathIdVector,z);break;case"component":y.isComponent=!0,y.extensionPoints={},d.archetypePathId=n,k=y,a.countExtensions++,a.countComponents++;break;case"root":if(null!=e||k)throw new Error("Internal error: componentDescriptor_ should be undefined.");y.isComponent=!0,y.extensionPoints={},k=y,a.countComponents++;break;case"child":if(null==e||!e)throw new Error("Internal error: componentDescriptor_ should be defined.");y.idComponent=e.id,k=e,a.countChildren++;break;default:throw new Error("Unrecognized namespace type '"+q+"' in object model namespace declaration.")}if(a.objectModelDescriptorById[y.idComponent].componentNamespaceIds.push(y.id),null==b.subNamespaces||!b.subNamespaces)return!0;for(C=b.subNamespaces,A=0,B=C.length;B>A;A++)w=C[A],f(w,t,y,k,y.parentPathIdVector,s);return!0}catch(D){throw m=D,new Error("buildOMDescriptorFromLayout failure on path '"+c+"'. Details: "+m.message)}}}(this),this.getNamespaceDescriptorFromPathId=function(a){return function(b){var c,d;try{if(null==b)throw new Error("Missing path ID parameter!");if(0>b||b>=a.objectModelDescriptorById.length)throw new Error("Out of range path ID '"+b+" cannot be resolved.");if(d=a.objectModelDescriptorById[b],null==d||!d)throw new Error("Cannot resolve path ID `"+b+"` in data model '"+a.objectModelDescriptorById[0].jsonTag+"'.");return d}catch(e){throw c=e,new Error("getNamespaceDescriptorFromPathId failure: "+c.message)}}}(this),this.getNamespaceDescriptorFromPath=function(a){return function(b){var c;try{return a.getNamespaceDescriptorFromPathId(a.getPathIdFromPath(b))}catch(d){throw c=d,new Error("getNamespaceDescriptorFromPath failure: "+c.message)}}}(this),this.getPathIdFromPath=function(a){return function(b){var c,d,e;try{if(null==b||!b)throw new Error("Missing object model path parameter!");if(d=a.objectModelPathMap[b],null==d||!d)throw new Error("Path '"+b+"' is not in the '"+a.model.jsonTag+"' model's address space.");if(e=d.id,null==e)throw new Error("Internal error: Invalid object model descriptor doesn't support id property for path '"+objectModelPath_+"'.");return e}catch(f){throw c=f,new Error("getPathIdFromPath fail: "+c.message)}}}(this),this.getPathFromPathId=function(a){return function(b){var c,d,e;try{if(d=a.getNamespaceDescriptorFromPathId(b),null==d||!d)throw new Error("Internal error: Can't find object descriptor for valid path ID '"+b+".");if(e=d.path,null==e||!e)throw new Error("Internal error: Invalid object model descriptor doesn't support path property for path '"+objectModelPath_+"'.");return e}catch(f){throw c=f,new Error("getPathFromPathId fail: "+c.message)}}}(this),this.createAddressFromPathId=function(a){var c,e,f,h,i,j,k,l,m;try{if(null==a)throw new Error("Missing path input parameter.");for(j=this.getNamespaceDescriptorFromPathId(a),f=new b(this.model),k=void 0,i=g.clone(j.parentPathIdVector),i.push(j.id),l=0,m=i.length;m>l;l++)h=i[l],c=this.getNamespaceDescriptorFromPathId(h),"component"===c.namespaceType&&f.implementation.pushToken(k),k=new d(this.model,c.idExtensionPoint,void 0,c.id);return f.implementation.pushToken(k),f}catch(n){throw e=n,new Error("getAddressFromPathId failure: "+e.message)}},this.resetKeyGenerator=function(){return e=1,this.model},null==c||!c)throw new Error("Missing object model delcaration input parameter!");if(null==c.jsonTag||!c.jsonTag)throw new Error("Missing required root namespace property 'jsonTag'.");if(this.model.jsonTag=c.jsonTag,this.model.label=null!=c.____label&&c.____label||c.jsonTag,this.model.description=null!=c.____description&&c.____description||"<no description provided>",this.model.uuid=null!=c.uuid&&c.uuid||function(){throw new Error("Data model declaration missing required root namespace property 'uuid'.")}(),this.model.uuidVersion=null!=c.uuidVersion&&c.uuidVersion||function(){throw new Error("Data model declaration missing required root namespace property 'uuidVersion'.")}(),this.objectModelDeclaration=g.clone(c),Object.freeze(this.objectModelDeclaration),null==this.objectModelDeclaration||!this.objectModelDeclaration)throw new Error("Failed to deep copy (clone) source object model declaration.");if(this.objectModelPathMap={},this.objectModelDescriptorById=[],this.countDescriptors=0,this.countComponents=0,this.countExtensionPoints=0,this.countExtensions=0,this.countExtensionReferences=0,this.countChildren=0,this.rankMax=0,f(c),this.countExtensionPoints!==this.countExtensions+this.countExtensionReferences)throw new Error("Layout declaration error: extension point and extension descriptor counts do not match. countExtensionPoints="+this.countExtensionPoints+" countExtensions="+this.countExtensions);if(this.countComponents!==this.countExtensionPoints+1-this.countExtensionReferences)throw new Error("Layout declaration error: component count should be "+("extension count + 1 - extension references. componentCount="+this.countComponents+" ")+(" countExtensions="+this.countExtensions+" extensionReferences="+this.countExtensionReferences));switch(Object.freeze(this.objectModelPathMap),Object.freeze(this.objectModelDescriptorById),h={componentKeyGenerator:"internalUuid",namespaceVersion:"disabled"},this.semanticBindings={},this.componentKeyGenerator="internalUuid",this.namespaceVersioning="disabled",null!=this.objectModelDeclaration.semanticBindings&&this.objectModelDeclaration.semanticBindings&&(null!=this.objectModelDeclaration.semanticBindings.componentKeyGenerator&&this.objectModelDeclaration.semanticBindings.componentKeyGenerator&&(this.componentKeyGenerator=this.objectModelDeclaration.semanticBindings.componentKeyGenerator),null!=this.objectModelDeclaration.semanticBindings.namespaceVersioning&&this.objectModelDeclaration.semanticBindings.namespaceVersioning&&(this.namespaceVersioning=this.objectModelDeclaration.semanticBindings.namespaceVersioning)),this.componentKeyGenerator){case"internalLuid":this.semanticBindings.getUniqueKey=function(){return function(){return""+e++}}(this);break;case"internalUuid":this.semanticBindings.getUniqueKey=function(){return function(){return i.v4()}}(this);break;default:throw new Error("Unrecognized componentKeyGenerator='"+this.componentKeyGenerator+".'")}switch(this.namespaceVersioning){case"disabled":null!=this.semanticBindings.update&&this.semanticBindings.update&&delete this.semanticBindings.update;break;case"internalSimple":this.semanticBindings.update=function(a){return null!=a.revision?a.revision++:void 0};break;case"internalAdvanced":this.semanticBindings.update=function(a){return null!=a.revision&&a.revision++,null!=a.uuidRevision&&(a.uuidRevision=i.v4()),null!=a.revisionTime?a.revisionTime=g.getEpochTime():void 0};break;case"external":break;default:throw new Error("Unrecognized namespaceVersionion=`"+this.namespaceUpdateRevision+"'")}}catch(k){throw j=k,new Error("onm.Model.implementation failed: "+j.message)}}return a}()}).call(this)},function(a,b,c){(function(){var b;b=a.exports={generate:c(16),parse:c(17)}}).call(this)},function(a,b,c){(function(){var b,d,e;e=c(9),b=c(3),a.exports=d=function(){function a(a,c,d){var f,g,h,i,j;try{for(this.address=null!=a&&a||function(){throw new Error("Internal error missing address input parameter.")}(),this.model=null!=c&&c||function(){throw new Error("Internal error missing model input paramter.")}(),this.getModelPath=function(a){return function(){var b,c;try{if(!a.tokenVector.length)throw new Error("Invalid address contains no address tokens.");return c=a.getLastToken(),c.namespaceDescriptor.path}catch(d){throw b=d,new Error("getModelPath failure: "+b.message)}}}(this),this.getModelDescriptorFromSubpath=function(a){return function(b){var c,d,e,f,g,h,i,j,k;try{for(f=a.getModelPath(),e=a.getLastToken().namespaceDescriptor,h=b.split("."),j=0,k=h.length;k>j;j++)if(i=h[j],"extensionPoint"!==e.namespaceType||e.children.length)f+="."+i,e=a.model.implementation.getNamespaceDescriptorFromPath(f);else{if(d=null!=e.archetypePathId&&e.archetypePathId||function(){throw new Error("WAT")}(),c=a.model.implementation.getNamespaceDescriptorFromPathId(d),i!==c.jsonTag)throw new Error("Expected component name of '"+i+"' but instead found '"+c.jsonTag+"'.");f=c.path,e=c}return e}catch(l){throw g=l,new Error("getModelDescriptorFromSubpath failure: "+g.message)}}}(this),this.createSubpathIdAddress=function(a){return function(c){var d,f,g,h,i,j,k;try{if(!(null!=c&&c>-1))throw new Error("Missing namespace path ID input parameter.");if(f=a.getLastToken(),d=f.componentDescriptor,k=a.model.implementation.getNamespaceDescriptorFromPathId(c),k.idComponent!==d.id)throw new Error("Invalid path ID specified does not resolve to a namespace in the same component as the source address.");return i=new e(a.model,f.idExtensionPoint,f.key,c),j=a.tokenVector.length>0&&a.tokenVector.slice(0,a.tokenVector.length-1)||[],j.push(i),h=new b(a.model,j)}catch(l){throw g=l,new Error("createSubpathIdAddress failure: "+g.message)}}}(this),this.pushToken=function(a){return function(b){var c,d;try{return a.tokenVector.length&&(d=a.tokenVector[a.tokenVector.length-1],a.validateTokenPair(d,b)),a.tokenVector.push(b.clone()),0===b.componentDescriptor.id&&(a.complete=!0),b.keyRequired&&(a.keysRequired=!0),b.isQualified()||(a.keysSpecified=!1),a.humanReadableString=void 0,a.hashString=void 0,a.address}catch(e){throw c=e,new Error("pushToken failure: "+c.message)}}}(this),this.validateTokenPair=function(a,b){var c;try{if(null==a||!a||null==b||!b)throw new Error("Internal error: input parameters are not correct.");if(a.namespaceDescriptor.id!==b.extensionPointDescriptor.id)throw new Error("Child token is invalid because the parent token does not select the required extension point namespace.");return!0}catch(d){throw c=d,new Error("validateTokenPair the specified parent and child tokens are incompatible and cannot be used to form an address: "+c.message)}},this.getLastToken=function(a){return function(){var b;try{if(!a.tokenVector.length)throw new Error("Illegal call to getLastToken on uninitialized address class instance.");return a.tokenVector[a.tokenVector.length-1]}catch(c){throw b=c,new Error("getLastToken failure: "+b.message)}}}(this),this.getDescriptor=function(a){return function(){var b;try{return a.getLastToken().namespaceDescriptor}catch(c){throw b=c,new Error("getDescriptor failure: "+b.message)}}}(this),this.tokenVector=[],this.parentExtensionPointId=-1,this.complete=!1,this.keysRequired=!1,this.keysSpecified=!0,j=null!=d&&d||[],h=0,i=j.length;i>h;h++)g=j[h],this.pushToken(g);this.parentAddressesAscending=void 0,this.parentAddressesDescending=void 0,this.subnamespaceAddressesAscending=void 0,this.subnamespaceAddressesDescending=void 0,this.subcomponentAddressesAscending=void 0,this.subcomponentsAddressesDescending=void 0,this.humanReadableString=void 0,this.hashString=void 0}catch(k){throw f=k,new Error("AddressDetails failure: "+f.message)}}return a}()}).call(this)},function(a,b,c){(function(){var b,d,e;e=c(7),b=c(5),a.exports=d=function(){function a(a){var c;try{this.store=a,this.dispatchCallback=function(a){return function(b,c,d){var e,f,g,h,i,j,k;try{if(null==d||!d){j=a.store.implementation.observers,k=[];for(i in j)if(f=j[i],e=f[c],null!=e&&e)try{k.push(e(a.store,i,b))}catch(l){throw g=l,new Error("An error occurred in the '"+c+"' method of your observer interface: "+g.message)}else k.push(void 0);return k}if(f=a.store.implementation.observers[d],null==f||!f)throw new Error("Internal error: unable to resolve observer ID to obtain callback interface.");if(e=f[c],null!=e&&e)try{return e(a.store,d,b)}catch(l){throw g=l,new Error("An error occurred in the '"+c+"' method of your observer interface: "+g.message)}}catch(l){throw g=l,h="dispatchCallback failure while processing "+("address='"+b.getHumanReadableString()+"', callback='"+c+"', observer='"+(null!=d&&d||"[broadcast all]")+"': "+g.message),new Error(h)}}}(this),this.reifyStoreComponent=function(a){return function(b,c){var d,f;try{if(null==b||!b)throw new Error("Internal error: Missing address input parameter.");if(!e.dictionaryLength(a.store.implementation.observers))return;return d=a.dispatchCallback,d(b,"onComponentCreated",c),b.visitSubaddressesAscending(function(a){return d(a,"onNamespaceCreated",c)}),!0}catch(g){throw f=g,new Error("reifyStoreComponent failure: "+f.message)}}}(this),this.unreifyStoreComponent=function(a){return function(b,c){var d,f;try{if(null==b||!b)throw new Error("Internal error: Missing address input parameter.");if(!e.dictionaryLength(a.store.implementation.observers))return;return d=a.dispatchCallback,b.visitSubaddressesDescending(function(a){return d(a,"onNamespaceRemoved",c)}),d(b,"onComponentRemoved",c),!0}catch(g){throw f=g,new Error("unreifyStoreComponent failure: "+f.message)}}}(this),this.reifyStoreExtensions=function(a){return function(c,d,f){var g,h;try{if(null==c||!c)throw new Error("Internal error: Missing address input parameter.");if(!e.dictionaryLength(a.store.implementation.observers))return;return g=a.dispatchCallback,c.visitExtensionPointAddresses(function(c){var e;return e=new b(a.store,c),e.visitExtensionPointSubcomponents(function(b){return f?(a.reifyStoreExtensions(b,d,!0),a.unreifyStoreComponent(b,d)):(a.reifyStoreComponent(b,d),a.reifyStoreExtensions(b,d,!1)),!0}),!0})}catch(i){throw h=i,new Error("reifyStoreExtensions failure: "+h.message)}}}(this)}catch(d){throw c=d,new Error("StoreReifier constructor failed: "+c.message)}}return a}()}).call(this)},function(a,b,c){(function(){var b,d,e,f;f=c(7),b=c(3),e=c(18),a.exports=d={},d.resolve=function(a){var c,d,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E;l=!1;try{if(null==a||!a)throw new Error("Missing options input parameter.");if(null==a.parentDataReference||!a.parentDataReference)throw new Error("Missing options.parentDataReference parameter.");if(null==a.address||!a.address)throw new Error("Missing options.address parameter.");if(null==a.strategy||!a.strategy)throw new Error("Missing options.strategy parameter.");if("open"!==a.strategy&&"create"!==a.strategy&&"negotiate"!==a.strategy)throw new Error("Unrecognized options.strategy value.");for(l=!0,t=[],i=[],v=[],j=[],D=a.address.implementation.tokenVector,z=0,B=D.length;B>z;z++)x=D[z],v.push(x.clone());for(u=[],h=v.shift(),f={strategy:0===v.length&&a.strategy||"negotiate",parentDataReference:a.parentDataReference,addressToken:h,semanticBindingsReference:a.address.model.getSemanticBindings(),propertyAssignmentObject:0===v.length&&a.propertyAssignmentObject||{},onVector:!0},d={input:f,output:e.resolve(f)},u.push(d),g=0;u.length;){for(d=u.shift(),E=d.output.dataChangeEventJournal,A=0,C=E.length;C>A;A++)c=E[A],i.push(c);if(o=null!=d.input.onVector&&d.input.onVector||!1,o&&(t.push(d),j.push(d.input.addressToken)),o&&0!==v.length){if("extensionPoint"!==d.input.addressToken.namespaceDescriptor.namespaceType)throw new Error("Internal consistency check error: expected the most-recently resolved component namespace type to be an extension point.");if(d.input.addressToken.idNamespace!==v[0].idExtensionPoint)throw new Error("Internal consistency check error: unexpected component found at the head of the source token queue.");if(d.output.pendingSubcomponentStack.length&&1!==v.length)throw new Error("Internal consistency check error: unexpected pending subcomponent stack size. should be empty.");if(n=d.output.namedObjectResolutionVector,p=n[n.length-1].output.namespaceDataReference,d.output.pendingSubcomponentStack.length)for(;d.output.pendingSubcomponentStack.length;)q=d.output.pendingSubcomponentStack.pop(),q.onVector=!0,q.propertyAssignmentObject=0===v.length&&a.propertyAssignmentObject||{},u.push({input:q,output:e.resolve(q)});else h=v.shift(),f={strategy:0===v.length&&a.strategy||"negotiate",parentDataReference:p,addressToken:h,semanticBindingsReference:a.address.model.getSemanticBindings(),propertyAssignmentObject:0===v.length&&a.propertyAssignmentObject||{},onVector:!0},u.push({input:f,output:e.resolve(f)})}else for(;d.output.pendingSubcomponentStack.length;)r=d.output.pendingSubcomponentStack.pop(),r.onVector=!1,u.push({input:r,output:e.resolve(r)})}if(v.length)throw new Error("Internal consistency check error: unexpected address resolver exit with non-empty source token queue.");if(t.length!==a.address.implementation.tokenVector.length)throw new Error("Internal consistency check error: unexpected address resolver exit with too few resolved components.");return{resolvedComponentVector:t,dataChangeEventJournal:i}}catch(F){throw k=F,l?(w=a.address.uri(),s=j.length&&new b(a.address.model,j).uri()||"",y=w.substring(s.length,w.length),m="addressResolver.resolve failed to resolve '"+s+">>"+y+"<<' via strategy '"+a.strategy+"':: "+k.message):m="addressResolver failed in function prologue: "+k.message,new Error(m)}},d.getResolvedNamedObjectReference=function(a){var b,c,d;try{if(null==a||!a)throw new Error("Missing resolved address context object in-parameter.");if(d=a.resolvedComponentVector.length,!d)throw new Error("Cannot extract a named object reference from resolved address context object because it contains no resolved components.");return c=a.resolvedComponentVector[d-1],e.getResolvedNamedObjectReference(c)}catch(f){throw b=f,new Error("addressResolver.getResolvedNamedObjectReference failed: "+b.message)}},d.getResolvedTokenVector=function(a){var b,c,d,f,g,h;try{if(d=[],null==a||!a)throw new Error("Missing resolved address context object in-parameter.");for(h=a.resolvedComponentVector,f=0,g=h.length;g>f;f++)c=h[f],d.push(e.getResolvedToken(c));return d}catch(i){throw b=i,new Error("addressResolver.getResolvedTokenVector failed: "+b.message)}}}).call(this)},function(a){(function(){"use strict";var b,c,d;d={},d.reservedPropertyName="__cid__",d.cnames=[],d.cname2cid={IRUT:"onmRWMgVT-Gls0D99oo-9A",Model:"onmnqPaPSWKDsC9c8GZaEg",Address:"onm-jxccSVSMum1pxB7-RA",Store:"onmJ854qRVarn0zv7arr1w",Namespace:"onmPnVIeToa_1BxO8Y47gg",NSD:"onm7f7BZTEONDSnfrSs6AA",ASM:"onmN7AoERO-3jIhkVqkxEg",RAS:"onmbrsKOR0iv8kZXzhXejw",DAO:"onmP7n5uTxaLduPZF_Naig",RAL:"onmthokETQuOMLrIDeegpw",RLP:"onmESS9lSZukNLhQmCosyQ",RIS:"onmf5Qt2RD2g30oDtsZD1g",DAB:"onmCBeRAQFKhIokTJLTGfA",JSON:"onmFMpxfSCaZO943sLfuxw",DATA:"onmVNJZMQUKjDmocj6esPA"},d.cid2cname={};for(c in d.cname2cid)b=d.cname2cid[c],d.cid2cname[b]=c,d.cnames.push(c);Object.freeze(d),a.exports=d}).call(this)},function(a,b,c){(function(){var b,d,e;b={path:c(21),vector:c(22),irut:c(23)},d={readable:b.path,hash:b.path,lri:b.vector,uri:b.vector,irut:b.irut},e={},e.generate=a.exports=function(a){var b,c,e,f,g,h,i,j;for(b=[],h={error:null,result:null},g=!1;!g;){if(g=!0,null==a||!a){b.unshift("Missing required request object in-parameter.");break}if(null==a.format||!a.format){b.unshift("Invalid request object missing required property 'format'.");break}if(e=Object.prototype.toString.call(a.format),"[object String]"!==e){b.unshift("Invalid request object 'format' value type. Expected reference to '[object String]'.");break}if(c=a.format,i=d[c],null==i||!i){j=[];for(c in d)j.push(c);b.unshift("Sorry. No registered generator for format '"+c+"'. Valid formats: ["+j+"].");break}f=i(a),f.error?b.unshift(f.error):h.result=f.result}return b.length&&(b.unshift("RISP.generate failed:"),h.error=b.join(" ")),h}}).call(this)},function(a,b,c){(function(){var b,d,e,f,g,h;d=c(8),e=c(2),b=c(3),g=c(19),h=c(20),f=a.exports=function(a){var b,c,e,f,i,j,k,l,m,n,o,p;for(e=[],l={error:null,result:null},f=!1;!f;){if(f=!0,null==a||!a){e.unshift("Missing required request object in-parameter.");break}if(null==a.model||!a.model){e.unshift("Invalid request object missing required property 'model'.");break}if(c=d.assertCNAME({ref:a.model,cname:"Model"}),c.error){e.unshift(c.error);break}if(null==a.xri||!a.xri){e.unshift("Invalid request object missing required property 'xri'.");break}if(p=Object.prototype.toString.call(a.xri),"[object String]"!==p){e.unshift("Invalid request object 'xri' value type '"+p+"'. Expected string reference.");break}switch(i=a.model,m=a.xri,b=null!=a.addressBase&&a.addressBase||void 0,o=m.split(":"),n=1===o.length&&"path"||o.length>1&&"vector"||"wat"){case"path":if(null!=b&&b&&(c=d.assertCNAME({ref:b,cname:"Address"}),c.error)){e.unshift(c.error);break}j=g({model:i,addressBase:b,xriTokens:o}),j.error?e.unshift(j.error):l.result=j.result;break;case"vector":if(null!=b&&b){e.unshift("Invalid request object sets 'addressBase' value in the context of a vector xRI parse.");break}k=h({model:i,xriTokens:o}),k.error?e.unshift(k.error):l.result=k.result;break;default:e.unshift("xRI string value is not even wrong.")}}return e.length&&(e.unshift(null!=m&&m?"xRIP.parse '"+m+"' failed:":"xRIP.parse failed:"),l.error=e.join(" ")),l}}).call(this)},function(a,b,c){(function(){var b,d,e,f,g;b=c(9),g=c(24),d=c(25),a.exports=e={},e.resolve=function(a){var c,e,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x;try{if(!d.checkValidContextInput(a))throw new Error("Invalid options in-parameter.");for(i=d.initializeContextObject(a),n=f(i.input.addressToken),o=[],t=[],j=[],p={strategy:i.input.strategy,parentDataReference:i.input.parentDataReference,targetNamespaceDescriptor:i.input.addressToken.componentDescriptor,targetNamespaceKey:i.input.addressToken.key,semanticBindingsReference:i.input.semanticBindingsReference,propertyAssignmentObject:i.input.addressToken.idComponent===i.input.addressToken.idNamespace&&i.input.propertyAssignmentObject||{}},o.push({input:p,output:g.resolve(p)});o.length;){for(m=o.pop(),u=n.resultVector[m.output.resolvedId],void 0!==u&&(n.resultVector[m.output.resolvedId]=n.lastResolutionResult=m,n.workQueue.shift()),x=m.output.dataChangeEventJournal,v=0,w=x.length;w>v;v++)e=x[v],j.push(e);if(m.output.pendingResolutionStack.length)switch(m.input.targetNamespaceDescriptor.namespaceType){case"extensionPoint":for(;m.output.pendingResolutionStack.length;)p=m.output.pendingResolutionStack.pop(),"open"===p.strategy&&"negotiate"===i.input.strategy&&(p.strategy="negotiate"),s=new b(i.input.addressToken.model,m.output.resolvedId,p.targetNamespaceKey,p.targetNamespaceDescriptor.id),h={strategy:p.strategy,parentDataReference:p.parentDataReference,addressToken:s,semanticBindingsReference:p.semanticBindingsReference,propertyAssignmentObject:p.propertyAssignmentObject},t.push(h);
break;default:for(;m.output.pendingResolutionStack.length;){if(p=m.output.pendingResolutionStack.pop(),p.targetNamespaceDescriptor.id===i.input.addressToken.idNamespace){if(Object.keys(p.propertyAssignmentObject).length>0)throw new Error("Internal consistency check error: We do not expect property assignment data to be propogating below the target namespace during a component resolution.");p.propertyAssignmentObject=null!=i.input.propertyAssignmentObject&&i.input.propertyAssignmentObject||{}}o.push({input:p,output:g.resolve(p)})}}!o.length&&n.workQueue.length&&(q=n.workQueue[0],r=q.id===a.addressToken.idNamespace&&a.propertyAssignmentObject||{},p={strategy:n.lastResolutionResult.output.strategyFollowed,parentDataReference:n.lastResolutionResult.output.namespaceDataReference,targetNamespaceDescriptor:q,targetNamespaceKey:null,semanticBindingsReference:i.input.semanticBindingsReference,propertyAssignmentObject:r},o.push({input:p,output:g.resolve(p)}))}if(i.output.namedObjectResolutionVector=n.resultVector,i.output.pendingSubcomponentStack=t,i.output.dataChangeEventJournal=j,!d.checkValidContextOutput(i.output))throw new Error("Internal test case failure: context.output object validation failed.");return i.output}catch(y){throw k=y,c=a.addressToken,l="componentResolver.resolve failed to resolve token {"+(null!=c.extensionPointDescriptor&&c.extensionPointDescriptor&&c.extensionPointDescriptor.jsonTag||"anonymous")+","+(null!=c.key&&c.key||"*")+","+c.componentDescriptor.jsonTag+","+c.namespaceDescriptor.jsonTag+"} :: "+k.message,new Error(l)}},f=function(a){var b,c,d,e,f,g;for(e=a.namespaceDescriptor.parentPathIdVector.length-a.componentDescriptor.parentPathIdVector.length,c=a.namespaceDescriptor.parentPathIdVector.slice(a.componentDescriptor.parentPathIdVector.length,a.namespaceDescriptor.parentPathIdVector.length),c.push(a.namespaceDescriptor.id),d={resultVector:[],workQueue:[],lastResolutionResult:null},f=0,g=c.length;g>f;f++)b=c[f],d.resultVector[b]=null,d.workQueue.push(a.model.implementation.getNamespaceDescriptorFromPathId(b));return d},e.getResolvedNamedObjectReference=function(a){var b,c,d;try{if(null==a&&!a)throw new Error("Missing resolved component context object in-parameter.");if(d=a.output.namedObjectResolutionVector.length,!d)throw new Error("Cannot extract named object reference from resolved component context object because it contains no resolved named objects.");return c=a.output.namedObjectResolutionVector[d-1],g.getResolvedNamedObjectReference(c)}catch(e){throw b=e,new Error("componentResolver.getResolvedNamedObjectReference failed: "+b.message)}},e.getResolvedToken=function(a){var b,c;try{return c=a.input.addressToken.clone(),c.key=a.output.namedObjectResolutionVector[c.idComponent].output.namespaceEffectiveKey,c}catch(d){throw b=d,new Error("componentResolver.getResolvedToken failed: "+b.message)}}}).call(this)},function(a,b,c){(function(){var b,d;d=c(26),b=a.exports=function(a){var b,c,e,f,g,h,i,j,k,l,m,n,o,p;for(e=[],l={error:null,result:null},b=a.addressBase,n=a.xriTokens,h=!1;!h;){for(h=!0,k=n[0].split("."),g=0,c=!1,o=0,p=k.length;p>o;o++)if(j=k[o],"//"===j){if(c){e.unshift("Path contains illegal namespace descent after ascent.");break}g++}else c=!0;if(e.length)break;if(g&&(null==b||!b||b.implementation.getDescriptor().parentPathIdVector.length-g<0)){e.unshift("Path contains illegal descent into the model's anonymous namespace.");break}if(g&&null!=b&&b){try{if(b=b.createParentAddress(g),null==b||!baseAddress){e.unshift("Internal error evaluating requested "+g+"-level namespace descent.");break}}catch(q){f=q,e.unshift("Internal error evaluating requested "+g+"-level namespace descent.");break}if(!(xriTokens2.length-g)){l.result=b;break}k.shift(g),n.shift(),k.length&&(m=k.length>1&&k.join(".")||k[0],n.unshift(m))}i=d({model:a.model,addressBase:b,xriTokens:n}),i.error?e.unshift(i.error):l.result=i.result}return e.length&&(l.error=e.join(" ")),l}}).call(this)},function(a,b,c){(function(){var b,d;d={"onm-lri":c(27),"onm-uri":c(28)},b=a.exports=function(a){var b,c,e,f,g,h,i;for(b=[],e={error:null,result:null},i=a.xriTokens,c=!1;!c;){if(c=!0,h=i.shift(),f=d[h],!f){b.unshift("Unrecognized xRI type '"+h+"'. Expected either 'onm-lri', or 'onm-uri'.");break}g=f({model:a.model,xriTokens:i}),g.error?b.unshift(g.error):e.result=g.result}return b.length&&(e.error=b.join(" ")),e}}).call(this)},function(a,b,c){(function(){var b,d,e;b=c(8),e={},d={readable:c(29),hash:c(30)},e.generatePath=a.exports=function(a){var c,e,f,g,h,i,j;for(e=[],i={error:null,result:null},g=!1;!g;){if(g=!0,null==a.address||!a.address){e.unshift("Invalid request object missing required property 'address'.");break}if(c=b.assertCNAME({ref:a.address,Address:"Address"}),c.error){e.unshift(c.error);break}if(h=a.format,j=d[h],null==j||!j){e.unshift("Internal error. No registered path generator for format '"+h+"'.");break}f=j(a),f.error?e.unshift(f.error):i.result=f.result}return e.length&&(e.unshift("Path generate failed:"),i.error=e.join(" ")),i}}).call(this)},function(a,b,c){(function(){var b,d,e;b=c(8),d={},e={lri:c(31),uri:c(32)},d.generateVector=a.exports=function(a){var c,d,f,g,h,i,j;for(d=[],i={error:null,result:null},g=!1;!g;){if(g=!0,null==a.address||!a.address){d.unshift("Invalid request object missing required property 'address'.");break}if(c=b.assertCNAME({ref:a.address,cname:"Address"}),c.error){d.unshift(c.error);break}if(h=a.format,j=e[h],null==j||!j){d.unshift("Internal error. No registered vector generator for format '"+h+"'.");break}f=j(a),f.error?d.unshift(f.error):i.result=f.result}return d.length&&(d.unshift("Vector generate failed:"),i.error=d.join(" ")),i}}).call(this)},function(a,b,c){(function(){var b,d,e;b=c(8),e=c(1),d={},d.generateIRUT=a.exports=function(){var a,c,d,f,g,h,i;for(c=e.v4(null,new Uint8Array(16,0)),d=new Buffer(c).toString("base64"),a=0;"="===d.charAt(d.length-a-1);)a++;return f=d.slice(0,d.length-a),g=f.replace(/\//g,"_"),h=g.replace(/\+/g,"-"),i={error:null,result:b.setCID({ref:{value:h},cname:"IRUT"}).result}}}).call(this)},function(a,b,c){(function(){var b,d,e,f,g;b=c(33),d=c(34),e={open:c(35),create:c(36)},a.exports=f={},f.resolve=function(a){var c,f,h,i,j;try{if(!b.checkValidContextInput(a))throw new Error("Internal test case failure: invalid options object in-parameter.");if(c=b.initializeContextObject(a),f=g(c),j=e[c.output.strategyFollowed],f=f&&d.visitNamespaceProperties(j,c),f=f&&d.visitNamespaceChildren(j,c),f=f&&d.processPropertyOptions(j,c),f=f&&d.finalizeContext(j,c),!b.checkValidContextOutput(c.output))throw new Error("Internal test case failure: context.output object validation failed.");return c.output}catch(k){throw h=k,i="namedObjectResolver.resolve failed :: "+h.message,new Error(i)}},f.getResolvedNamedObjectReference=function(a){var b,c;try{if(null==a||!a)throw new Error("Missing resolved named object context object in-parameter.");if(c=a.output.namespaceDataReference,null==c||!c||"object"!=typeof c)throw new Error("Resolved named object reference is undefined, null, or not an object as expected!");return c}catch(d){throw b=d,new Error("namedObjectResolver failure: "+b.message)}},g=function(a){var b,c,d,e,f;try{switch(e=a.input,f=a.output,b=e.targetNamespaceDescriptor,f.namespaceEffectiveKey=c="component"!==b.namespaceType&&b.jsonTag||e.targetNamespaceKey,f.namespaceDataReference=e.parentDataReference[c],e.strategy){case"open":if(null==f.namespaceDataReference||!f.namespaceDataReference)throw new Error("Named object at key '"+c+"' does not exist.");f.strategyFollowed="open";break;case"create":if(null!=f.namespaceDataReference&&f.namespaceDataReference)throw new Error("Named object at key '"+c+"' already exists.");f.strategyFollowed="create";break;case"negotiate":f.strategyFollowed=null!=f.namespaceDataReference&&f.namespaceDataReference&&"open"||"create";break;default:throw new Error("Unrecognized named object dereference strategy '"+e.strategy+"'.")}switch(f.strategyFollowed){case"open":break;case"create":null!=c&&c&&null!=c.length&&c.length||(f.namespaceEffectiveKey=c=e.semanticBindingsReference.getUniqueKey()),f.namespaceDataReference=e.parentDataReference[c]={},f.dataChangeEventJournal.push({layer:"namedObject",event:"namedObjectCreated",eventData:{namespaceType:b.namespaceType,namespaceModelPath:b.path,namespaceModelId:b.id,key:c}})}return f.resolvedId=e.targetNamespaceDescriptor.id,!0}catch(g){throw d=g,new Error(d.message+(" ('"+b.namespaceType+"' namespace '"+b.jsonTag+"')."))}}}).call(this)},function(a){(function(){var b;a.exports=b={},b.initializeContextObject=function(a){var b;return b={input:a,output:{namedObjectResolutionVector:null,pendingSubcomponentStack:null,dataChangeEventJournal:null}}},b.checkValidContextInput=function(a){var b,c;for(b={valid:!0,reason:"okay"},c=function(a){return b.valid=!1,b.reason=a,b};;){if(null==a||!a){c("Missing options in-parameter.");break}if(null==a.parentDataReference||!a.parentDataReference){c("Missing parent data object reference.");break}if(null==a.addressToken||!a.addressToken){c("Missing address token object reference.");break}if(null==a.strategy||!a.strategy||null==a.strategy.length||!a.strategy.length){c("Missing resolution strategy specification.");break}if(null==a.semanticBindingsReference||!a.semanticBindingsReference){c("Missing semantic bindings reference.");break}break}return b.valid||console.warn("Invalid named object input context object: '"+b.reason+"'."),b.valid},b.checkValidContextOutput=function(a){var b,c;for(b={valid:!0,reason:"okay"},c=function(a){return b.valid=!1,b.reason=a,b};;){if(null==a||!b){c("Missing results in-parameter.");break}if(null==a.namedObjectResolutionVector||!a.namedObjectResolutionVector||!a.namedObjectResolutionVector.length){c("Missing or empty named object resolution vector.");break}break}return b.valid||console.warn("Invalid named object input context object: '"+b.reason+"'."),b.valid}}).call(this)},function(a,b,c){(function(){var b,d,e;b=c(3),d=c(9),e=a.exports=function(a){var c,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L;for(f=[],j=null,c=null,l=[],y={error:null,result:null},F=a.xriTokens,u=F.shift(),x=null!=u&&u&&u.length&&u.split("."),t=F.length&&F.join(":")||void 0,q=a.model,e=a.addressBase,D=null!=a.uriFormat&&a.uriFormat||!1,n=!1;!n;){if(n=!0,!x.length){y.result=null!=e&&e||a.model.address("*");break}if(w=0,null!=e&&e){for(o=0,z=e.implementation.tokenVector;o<z.length-1;)f.push(z[o++].clone());i=z[z.length-1].clone()}else{if(!D&&(v=x[w++],"*"!==v&&v!==q.jsonTag)){l.unshift("Expected either '*' or '"+q.jsonTag+"'."),l.unshift("Path beginning with token '"+v+"' cannot be parsed relative to this model's anonymous namespace.");break}i=new d(q,void 0,void 0,0)}for(;w<x.length&&(v=x[w++],!l.length);)if(r=i.namespaceDescriptor,m="extensionPoint"===r.namespaceType&&!0||!1)f.push(i),A=q.implementation.getNamespaceDescriptorFromPathId(r.archetypePathId).jsonTag,p=void 0,p=!("+"===v||v===A)&&v||void 0,i=new d(q,r.id,p,r.archetypePathId);else{for(s=null,K=r.children,G=0,I=K.length;I>G;G++)if(g=K[G],v===g.jsonTag){s=g;break}if(null==s||!s){if(E=w&&""+x.slice(0,w-1).join(".")+"."||"",C=w<x.length&&"."+x.slice(w,x.length).join(".")||"",B="Path token "+w+", '"+E+">>>"+v+"<<<"+C+"', vectors outside model's address space.",r.children.length){for(k="Hint: parent namespace '"+r.jsonTag+"' declares child namespace(s):",h=[],L=r.children,H=0,J=L.length;J>H;H++)g=L[H],h.unshift(" '"+g.jsonTag+"' of type '"+g.namespaceType+"'");k+=""+h.join(",")+"."}else k="Hint: parent namespace '"+r.jsonTag+"' is a leaf namespace with no declared children.";l.unshift(k),l.unshift(B);break}i=new d(q,i.idExtensionPoint,i.key,s.id)}l.length||(f.push(i),y.result=new b(q,f))}return l.length?y.error=l.join(" "):null!=t&&t&&(y.result.pathMetaString=t),y}}).call(this)},function(a,b,c){(function(){var b,d,e;b=c(3),d=c(9),e=a.exports=function(a){var c,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;for(f=[],r={error:null,result:null},n=a.model,s=a.xriTokens,k=!1;!k;){if(k=!0,m=s.shift(),m!==n.uuidVersion){f.unshift("LRI in address space '"+m+"' cannot be decoded using model '"+n.uuid+":"+n.uuidVersion+"'.");break}if(!s.length){r.result=n.address("*");break}for(h=s.shift(),i=h.split("."),e=[],c=new d(n,void 0,void 0,0);i.length;){switch(j=i.shift(),q=!1,p=c.namespaceDescriptor,p.namespaceType){case"extensionPoint":switch(o=n.implementation.getNamespaceDescriptorFromPathId(p.archetypePathId),j){case o.jsonTag:l=void 0;break;case"+":l=void 0;break;default:l=j}e.push(c);try{c=new d(n,c.idNamespace,l,o.id)}catch(t){g=t,q=!0}break;default:try{c=new d(n,c.idExtensionPoint,c.key,parseInt(j))}catch(t){g=t,q=!0}}if(q){f.unshift("LRI identifies a namespace resource outside the declared address space of model '"+n.uuid+":"+n.uuidVersion+" address space.");break}}if(f.length)break;e.push(c),r.result=new b(n,e)}return f.length&&(r.error=f.join(" ")),r}}).call(this)},function(a,b,c){(function(){var b,d;b=c(26),d=a.exports=function(a){var c,d,e,f,g,h,i;for(c=[],g={error:null,result:null},i=a.xriTokens,e=a.model,d=!1;!d;){if(d=!0,h=i.shift(),h!==e.uuid){c.unshift("URI in address space '"+h+"' cannot be decoded using model '"+e.uuid+":"+e.uuidVersion+"'.");break}if(!i.length){g.result=a.model.address("*");break}f=b({model:a.model,xriTokens:i,uriFormat:!0}),f.error?c.unshift(f.error):g.result=f.result}return c.length&&(g.error=c.join(" ")),g}}).call(this)},function(a,b,c){(function(){var b,d;b=c(8),d=a.exports=function(a){var c,d,e,f,g,h,i,j;for(d=[],i={error:null,result:null},f=!1;!f;){if(f=!0,null==a||!a){d.unshift="Missing requires request object in-parameter.";break}if(null==a.address||!a.address){d.unshift="Invalid request object missing required property 'address'.";break}if(c=b.assertCNAME({ref:a.address,cname:"Address"}),c.error){d.unshift(c.error);break}if(j=null!=a.uriFormat&&a.uriFormat||!1,g=0,h=[],e=function(a){var b,c;return j&&g++?(c=a.getModel(),"component"!==c.namespaceType?(h.push(c.jsonTag),!0):(b=a.implementation.getLastToken().key,h.push(null!=b&&b||c.jsonTag))):!1},a.address.visitParentAddressesAscending(e),e(a.address),!h.length){j||d.unshfit("Internal error: pathTokens array is empty?");break}i.result=h.length>1&&h.join(".")||h[0]}return d.length&&(d.unshift("xRIP.generate.vector.uri failed:"),i.error=d.join(" ")),i}}).call(this)},function(a){(function(){var b;b=a.exports=function(a){var b,c,d,e,f,g,h;for(e={error:null,result:null},d=[],c=!0,h=a.address.implementation.tokenVector,f=0,g=h.length;g>f;f++)b=h[f],c||d.push(null!=b.key&&b.key||"+"),b.idComponent!==b.idNamespace&&d.push(""+b.idNamespace),c=!1;return e.result=d.length&&d.join(".")||void 0,e}}).call(this)},function(a,b,c){(function(){var b,d;b=c(30),d=a.exports=function(a){var c,d,e,f;for(c=[],f={error:null,result:null},d=!1;!d;){if(d=!0,e=b({address:a.address}),e.error){c.unshift(e.error);break}f.result="onm-lri:"+a.address.model.uuidVersion,e.result&&(f.result+=":"+e.result)}return c.length&&(c.unshift("xRIP_LRIVectorGenerator failed:"),f.error=c.join(" ")),f}}).call(this)},function(a,b,c){(function(){var b,d;b=c(29),d=a.exports=function(a){var c,d,e,f;for(c=[],f={error:null,result:null},d=!1;!d;){if(d=!0,e=b({address:a.address,uriFormat:!0}),e.error){c.unshift(e.error);break}f.result="onm-uri:"+a.address.model.uuid,e.result&&(f.result+=":"+e.result)}return c.length&&(c.unshift("xRIP_URIVectorGenerator failed:"),f.error=c.join(" ")),f}}).call(this)},function(a,b,c){(function(){var b,d;b=c(7),a.exports=d={},d.initializeContextObject=function(a){var c;return c={input:{strategy:null!=a.strategy&&a.strategy||"error",parentDataReference:a.parentDataReference,targetNamespaceDescriptor:a.targetNamespaceDescriptor,targetNamespaceKey:a.targetNamespaceKey,semanticBindingsReference:a.semanticBindingsReference,propertyAssignmentObject:null!=a.propertyAssignmentObject&&a.propertyAssignmentObject&&b.clone(a.propertyAssignmentObject)||{}},output:{strategyFollowed:"error",namespaceEffectiveKey:null,namespaceDataReference:null,dataChangeEventJournal:[],pendingResolutionStack:[],resolvedId:-1}}},d.checkValidContextInput=function(a){var b,c,d;for(b={valid:!0,reason:"okay"},c=function(a){return b.valid=!1,b.reason=a,b};;){if(null==a||!a){c("Missing options in-parameter.");break}if(null==a.parentDataReference||!a.parentDataReference){c("Missing parent data object reference.");break}if(null==a.targetNamespaceDescriptor||!a.targetNamespaceDescriptor){c("Missing target namespace descriptor object reference.");break}if(null==a.targetNamespaceDescriptor.jsonTag||!a.targetNamespaceDescriptor.jsonTag){c("Specified target namespace descriptor object appears invalid.");break}if(null==a.strategy||!a.strategy||null==a.strategy.length||!a.strategy.length){c("Missing resolution strategy specification.");break}switch(d=!0,a.strategy){case"open":break;case"create":break;case"negotiate":break;default:d=!1}if(!d){c("Unrecognized resolution strategy specified.");break}if(null!=a.targetNamespaceKey&&a.targetNamespaceKey&&(null!=a.targetNamespaceKey.length&&a.targetNamespaceKey.length||c("Invalid target namespace key specified.")),null==a.semanticBindingsReference||!a.semanticBindingsReference){c("Missing semantic bindings reference.");break}if(null==a.propertyAssignmentObject||!a.propertyAssignmentObject){c("Missing property assignment object.");break}break}return b.valid},d.checkValidContextOutput=function(a){var b,c;for(b={valid:!0,reason:"okay"},c=function(a){return b.valid=!1,b.reason=a,b};;){if(null==a||!a){c("Missing results");break}if(!(null!=a.resolvedId&&a.resolvedId>=0)){c("Invalid resolved namespace model ID.");break}if(null==a.namespaceEffectiveKey||!a.namespaceEffectiveKey||null==a.namespaceEffectiveKey.length||!a.namespaceEffectiveKey.length){c("Invalid namespaceEffectiveKey");break}if(null==a.namespaceDataReference||!a.namespaceDataReference){c("Invalid namespaceDataReference");break}if(null==a.pendingResolutionStack||!a.pendingResolutionStack||!Array.isArray(a.pendingResolutionStack)){c("Invalid pendingResolutionStack");break}if(null==a.strategyFollowed||!a.strategyFollowed){c("Invalid strategyFollowed");break}if(null==a.dataChangeEventJournal||!a.dataChangeEventJournal||!Array.isArray(a.dataChangeEventJournal)){c("Invalid dataChangeEventJournal");break}switch(a.strategyFollowed){case"open":break;case"create":break;default:c("Invalid strategyFollowed value '"+a.strategyFollowed+"'.")}break}return b.valid}}).call(this)},function(a,b,c){(function(){var b,d;d=c(33),a.exports=b={},b.visitNamespaceProperties=function(a,b){var c,d,e,f,g,h,i;if(null==a.processNamespaceProperty||!a.processNamespaceProperty)return!0;if(c=b.input.targetNamespaceDescriptor,"extensionPoint"===c.namespaceType)return!0;if(g=!0,d=c.namespaceModelPropertiesDeclaration,null!=d.userImmutable&&d.userImmutable){h=d.userImmutable;for(f in h){if(e=h[f],!g)break;g=a.processNamespaceProperty(b,f,e)}}if(null!=d.userMutable&&d.userMutable){i=d.userMutable;for(f in i){if(e=i[f],!g)break;g=a.processNamespaceProperty(b,f,e)}}return g},b.visitNamespaceChildren=function(a,b){var c,d,e,f,g,h;if(null==a.processSubnamespace||!a.processSubnamespace)return!0;for(e=!0,d=b.input.targetNamespaceDescriptor,h=d.children,f=0,g=h.length;g>f&&(c=h[f],e);f++)e=a.processSubnamespace(b,c);return e},b.processPropertyOptions=function(a,b){return null!=a.processPropertyOptions&&a.processPropertyOptions&&a.processPropertyOptions(b)||!0},b.finalizeContext=function(a,b){return null!=a.finalizeContext&&a.finalizeContext&&a.finalizeContext(b)||!0}}).call(this)},function(a,b,c){(function(){var b;b=c(37),a.exports={policyName:"update exisiting namespace properties",processNamespaceProperty:function(a,c){var d,e,f;return d=a.input,e=a.output,null!=d.propertyAssignmentObject&&d.propertyAssignmentObject?(f=d.propertyAssignmentObject[c],b.checkValidPropertyValue(f)?(delete a.input.propertyAssignmentObject[c],e=a.output,e.namespaceDataReference[c]=f,e.dataChangeEventJournal.push({layer:"namedObject",event:"propertyUpdated",eventData:{name:c,model:!0,value:JSON.stringify(f),source:"data"}}),!0):!0):!0},processSubnamespace:function(a,c){var d,e,f,g;switch(f=a.input.propertyAssignmentObject,c.namespaceType){case"component":d=[];for(e in f){if(g=f[e],!b.checkValidNamedObject(g))throw new Error("Caller data framing error: Expected '"+e+"' to be a named object but instead found type '"+Object.prototype.toString.call(g)+"'.");d.push(e),a.output.pendingResolutionStack.push({parentDataReference:a.output.namespaceDataReference,targetNamespaceDescriptor:c,targetNamespaceKey:e,semanticBindingsReference:a.input.semanticBindingsReference,propertyAssignmentObject:null!=g&&g||{},strategy:"negotiate"})}for(;d.length;)delete a.input.propertyAssignmentObject[d.pop()];break;default:if(g=f[c.jsonTag],null!=g&&g){if(!b.checkValidNamedObject(g))throw new Error("Caller data framing error: Expected '"+e+"' to be a named object but instead found type '"+Object.prototype.toString.call(g)+"'.");a.output.pendingResolutionStack.push({parentDataReference:a.output.namespaceDataReference,targetNamespaceDescriptor:c,targetNamespaceKey:e,semanticBindingsReference:a.input.semanticBindingsReference,propertyAssignmentObject:g,strategy:a.output.strategyFollowed}),delete a.input.propertyAssignmentObject[c.jsonTag]}}return!0},processPropertyOptions:function(a){var c,d,e,f,g,h;c=[],d=a.input,e=a.output,h=d.propertyAssignmentObject;for(f in h){if(g=h[f],!b.checkValidPropertyValue(g))throw new Error("Invalid value for assignment to property name '"+f+"'.");e.namespaceDataReference[f]=g,c.push(f),e.dataChangeEventJournal.push({layer:"namedObject",event:"propertyInitialized",eventData:{name:f,model:!1,value:JSON.stringify(g),source:"data"}})}for(;c.length;)delete d.propertyAssignmentObject[c.pop()];return!0},finalizeContext:function(){return!0}}}).call(this)},function(a,b,c){(function(){var b;b=c(37),a.exports={policyName:"initialize namespace properties",processNamespaceProperty:function(a,c,d){var e,f,g;if(g=!1,f=a.input.propertyAssignmentObject[c],b.checkValidPropertyValue(f))delete a.input.propertyAssignmentObject[c],g=!0;else if(f=d.defaultValue,!b.checkValidPropertyValue(f)&&(f=null!=d.fnCreate&&d.fnCreate&&d.fnCreate()||void 0,!b.checkValidPropertyValue(f)))throw new Error("Internal data model consistency check error: Cannot deduce value to assign to property name '"+c+"'.");return e=a.output,e.namespaceDataReference[c]=f,e.dataChangeEventJournal.push({layer:"namedObject",event:"propertyInitialized",eventData:{name:c,model:!0,value:JSON.stringify(f),source:g&&"data"||"model"}}),!0},processSubnamespace:function(a,c){var d,e,f,g;switch(f=a.input.propertyAssignmentObject,c.namespaceType){case"component":d=[];for(e in f){if(g=f[e],!b.checkValidNamedObject(g))throw new Error("Caller data framing error: Expected '"+e+"' to be a named object but instead found type '"+Object.prototype.toString.call(g)+"'.");d.push(e),a.output.pendingResolutionStack.push({parentDataReference:a.output.namespaceDataReference,targetNamespaceDescriptor:c,targetNamespaceKey:e,semanticBindingsReference:a.input.semanticBindingsReference,propertyAssignmentObject:null!=g&&g||{},strategy:"create"})}for(;d.length;)delete a.input.propertyAssignmentObject[d.pop()];break;default:if(g=f[c.jsonTag],null!=g&&g){if(!b.checkValidNamedObject(g))throw new Error("Caller data framing error: Expected '"+e+"' to be a named object but instead found type '"+Object.prototype.toString.call(g)+"'.");delete a.input.propertyAssignmentObject[c.jsonTag]}else g={};a.output.pendingResolutionStack.push({parentDataReference:a.output.namespaceDataReference,targetNamespaceDescriptor:c,targetNamespaceKey:"",semanticBindingsReference:a.input.semanticBindingsReference,propertyAssignmentObject:g,strategy:"create"})}return!0},processPropertyOptions:function(a){var c,d,e,f,g,h;c=[],d=a.input,e=a.output,h=d.propertyAssignmentObject;for(f in h){if(g=h[f],!b.checkValidPropertyValue(g))throw new Error("Invalid value for assignment to property name '"+f+"'.");e.namespaceDataReference[f]=g,c.push(f),e.dataChangeEventJournal.push({layer:"namedObject",event:"propertyInitialized",eventData:{name:f,model:!1,value:JSON.stringify(g),source:"data"}})}for(;c.length;)delete d.propertyAssignmentObject[c.pop()];return!0},finalizeContext:function(){return!0}}}).call(this)},function(a){(function(){var b,c;a.exports=b={},c={"[object Null]":!0,"[object Boolean]":!0,"[object String]":!0,"[object Number]":!0,"[object Object]":!0,"[object Array]":!0},b.checkValidPropertyValue=function(a){var b;return b=c[Object.prototype.toString.call(a)],null!=b&&b||!1},b.checkValidNamedObject=function(a){return"[object Object]"===Object.prototype.toString.call(a)||!1}}).call(this)}]);